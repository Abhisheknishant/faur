#!/usr/bin/env python

import subprocess, sys

def main():
    def call(cmd):
        subprocess.call(cmd, shell = True)

    a2x_dir = sys.path[0]

    if len(sys.argv) == 2 and sys.argv[1] == "clean":
        command = "clean"
    else:
        command = ""
        print("Add " + a2x_dir + " to $PATH")
        print("Dependencies: SDL, SDL_mixer, libpng")
        print("------------------------------------")

    call("cd " + a2x_dir + "/make/a2x; make " + command)
    call("cd " + a2x_dir + "/tools/gfx; make " + command)
    call("cd " + a2x_dir + "/tools/sfx; make " + command)

if __name__ == "__main__":
    main()
